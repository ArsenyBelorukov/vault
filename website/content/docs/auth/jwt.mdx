---
layout: docs
page_title: JWT - Auth Method
description: >-
  The JWT auth method allows authentication using signed JWTs
---

# JWT auth method

@include 'x509-sha1-deprecation.mdx'

Use the `jwt` authN method to authenticate to Vault with JSON Web Tokens
([JWT](https://en.wikipedia.org/wiki/JSON_Web_Token)). JWT authentication
is commonly used in Workload Identity Federation (WIF) workflows for
machine-to-machine authentication.

To use JWT, you must configure Vault to trust a JWT issuer. For example, a
cloud service provider that makes workload identity available in a virtual machine
or CI provider that provides identities to jobs.

Vault will require a signed JWT from the configured issuer as the form of
authentication and the authN method will cryptographically verify the client
signature using the issuer's public key. You can use verified JWT claims to
gate authentication to Vault by requiring [additional validation](#bound-claims).

You must [configure](#jwt-verification) the authN method with public keys from
the JWT issuer with OIDC Discovery, a JSON Web Key Set (JWKS) URL, or
locally-provided keys. 

## Authentication

### Authenticate with the CLI

```shell-session
$ vault write auth/jwt/login role=demo jwt=...
```

The default path for the JWT authentication backend is `/jwt`. To use the default backend, set the path parameter to `auth/jwt/login` in your `vault write` command:

```shell-session
$ vault write auth/jwt/login role=demo jwt=...
```

If your JWT auth backend is using a different path, use that path.

### Authenticate with the API

The default endpoint is `auth/jwt/login`. If this auth method was enabled
at a different path, use that value instead of `jwt`.

```shell-session
$ curl \
    --request POST \
    --data '{"jwt": "your_jwt", "role": "demo"}' \
    http://127.0.0.1:8200/v1/auth/jwt/login
```

The response will contain a token at `auth.client_token`:

```json
{
  "auth": {
    "client_token": "hvs.abcd",
    "accessor": "78e87a38-84ed-2692-538f-ca8b9f400ab3",
    "policies": ["default"],
    "metadata": {
      "role": "demo"
    },
    "lease_duration": 2764800,
    "renewable": true
  }
}
```

## Configuration

Auth methods must be configured in advance before users or machines can
authenticate. These steps are usually completed by an operator or configuration
management tool.

1. Enable the JWT auth method.

   ```text
   $ vault auth enable jwt
   ```

1. Use the `/config` endpoint to configure Vault. To support JWT roles, either local keys,
   a JWKS URL, or an OIDC Discovery URL must be present. For an explanation of available
   configuration options, see the [API documentation](/vault/api-docs/auth/jwt#jwt-verification)
   section.

   ```text
   $ vault write auth/jwt/config \
      oidc_discovery_url="https://MYDOMAIN.eu.auth0.com/"
  ```

1. Create a named role:

   ```text
   vault write auth/jwt/role/demo \
       allowed_redirect_uris="http://localhost:8250/oidc/callback" \
       bound_subject="r3qX9DljwFIWhsiqwFiu38209F10atW6@clients" \
       bound_audiences="https://vault.plugin.auth.jwt.test" \
       user_claim="https://vault/user" \
       groups_claim="https://vault/groups" \
       policies=webapps \
       ttl=1h
   ```

This role authorizes JWTs with the given subject and audience claims, gives
it the `webapps` policy, and uses the given user/groups claims to set up
Identity aliases.

For the complete list of configuration options, please see the API
documentation.

### JWT verification

JWT signatures will be verified against public keys from the issuer. This process can be done in
three different ways, though only one method may be configured for a single backend:

- **Static Keys**. A set of public keys is stored directly in the backend configuration.

- **JWKS**. A JSON Web Key Set ([JWKS](https://tools.ietf.org/html/rfc7517)) URL (and optional
  certificate chain) is configured. Keys will be fetched from this endpoint during authentication.

- **OIDC Discovery**. An OIDC Discovery URL (and optional certificate chain) is configured. Keys
  will be fetched from this URL during authentication. When OIDC Discovery is used, OIDC validation
  criteria (e.g. `iss`, `aud`, etc.) will be applied.

If multiple methods are needed, another instance of the backend can be mounted and configured
at a different path.

@include 'oidc-jwt-claims.mdx'

## API

The JWT Auth Plugin has a full HTTP API. Please see the
[API docs](/vault/api-docs/auth/jwt) for more details.
